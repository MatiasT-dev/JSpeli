<!DOCTYPE html>
<html>
<head>
    <title>javaSpeli</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>

    <style>
        canvas {
            background: color #eeeeee; ;
            border: 2px solid #d3d3d3;
        }


    </style>
    
</head>
  <body style="background-color: black;" onload="aloitapeli()">
   
    <script>

        let piste = 0;
        
        var pelipala;
        var peliesto;
// aloitaa pelin
        function aloitapeli() {
            peliarena.start();
            pelipala = new osansa(30, 30, "white", 10, 120);
            peliesto = new osansa(20, 20, "green", 300, 120);
            tormaus(pelipala, peliesto);
        }
//pelin areena missä pelaja liikuu
        var peliarena = {
            canvas : document.createElement("canvas"),
            start : function(){

            this.canvas.width = 480;
            this.canvas.height = 270;
            this.context = this.canvas.getContext("2d");
            document.body.insertBefore(this.canvas, document.body.childNodes[0]);
            this.interval = setInterval(paivitapelia, 20);
            window.addEventListener('keydown', function (e) {
                peliarena.key = e.keyCode;
            })
            window.addEventListener('keyup', function (e) {
                peliarena.key = false;
            })
        },
        clear : function() {
            this.context.clearRect(0, 0, this.canvas.width, this.canvas.height);
        }

    }
//osat ja tasot
    function osansa(width, height, color, x, y) {
        this.width = width;
        this.height = height;
        this.nopeusX = 0;
        this.nopeusY = 0;  
        this.x = x;
        this.y = y;
        this.updaid = function() {
          ctx = peliarena.context;
         ctx.fillStyle = color;
         ctx.fillRect(this.x, this.y, this.width, this.height);
        }
        this.newpai = function(){
            this.x += this.nopeusX;
            this.y += this.nopeusY;
        }
    }
// liikuminen
    function paivitapelia() {
        peliarena.clear();
        pelipala.nopeusX = 0;
        pelipala.nopeusY = 0;
        if (peliarena.key && peliarena.key == 37) {pelipala.nopeusX = -1; }
        if (peliarena.key && peliarena.key == 39) {pelipala.nopeusX = 1; }
        if (peliarena.key && peliarena.key == 38) {pelipala.nopeusY = -1; }
        if (peliarena.key && peliarena.key == 40) {pelipala.nopeusY = 1; }
        peliesto.updaid();
        pelipala.newpai();
        pelipala.updaid();
    }
        //pisten päivityksen
        function paivitapiste() {
            document.getElementById("piste").innerHTML = piste;
        }
        //lisää pisteitä
        function lisaapiste() {
            piste++;
            paivitapiste();
        }
        //pisteen vähetäminen
        function pienenapiste() {
            piste--;
            paivitapiste();
        }
        //pisteiden aloitaa alusta
        function resepiste() {
        piste = 0;
        paivitapiste();
        }
        //pisteiden talentamiseen
        function talepistee() {
            localStorage.setItem("piste", piste);
        }
        //pisteiden uudelen ladatumiseen viimeksi talentuksesta
        function uudelenpistee() {
            let tale = localStorage.setItem("piste");
            if (tale !== null) {
                piste = Number(tale);
            }
            paivitapiste();
        }

           function tormaus(pelipala, peliesto) {
            
            pelipala = new osansa(30, 30, "white", 10, 120);
            peliesto = new osansa(10, 200, "white", 300, 120);

                
                var element = document.getElementById('some-id');
                var position = element.getBoundingClientRect();
                var x = position.left;
                var y = position.top;
            
               if (pelipala.position.x - pelipala.radius <= peliesto.position.x + peliesto.width &&
                   pelipala.position.x + pelipala.radius >= peliesto.position.x &&
                   pelipala.position.y - pelipala.radius <= peliesto.position.y + peliesto.height &&
                   pelipala.position.y + pelipala.radius >= peliesto.position.y
            ) {
              lisaapiste();  
            } else {
                console.log("no colosion");
            }
           }
            
        
        

    </script>

      <p id="piste" style="font-size:40px; color: white;">0</p>
    <button onclick="lisaapiste()" style="color: white;">+</button>
  </body>
</html>
